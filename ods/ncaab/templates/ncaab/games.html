{% extends 'ncaab/base.html' %}

{% block content %}
<div class="container-fluid">
	<div class="card">
		<div class="card-body">
			<div class="card-title">today's games</div>
			<div class="table-responsive">
				<table class="table table-sm table-bordered table-striped table-hover" id="games-table">
					<thead>
						<tr>
							<th>GAME</th>
							<th>TIME</th>
							<th>AWAY TEAM</th>
							<th>AWAY SCORE</th>
							<th>LINE</th>
							<th>TOTAL</th>
							<th>HOME SCORE</th>
							<th>HOME TEAM</th>
						</tr>
					</thead>
					<tbody></tbody>
				</table>
			</div>
		</div>
	</div>
</div>
<script type="text/javascript">
	$(document).ready(function(){
		var dateInput = "{{date_input}}";
		Promise.all([
			fetch("{% url 'ncaab:games_feed' 123456789 %}".replace(/123456789/,dateInput.toString()),{}),
			
			]).then(function(responses){
				return Promise.all(responses.map(function(response){
					return response.json();
				})).then(function(data){
					var loadData = data;
					return loadData;
				}).then(function(data){
					var srGames = data[0]["games"];
					var info = data[0]["info"];
					console.log(info);
					var gamesTable = $('#games-table').DataTable({
						data:info,
						dom:"Blftrip",
						pageLength:100,
						columns:[
							{'data':null,defaultContent:"link to boxscore"},
							{'data':"datetime"},
							{'data':"away_team"},
							{"data":"away_score"},
							{"data":"odds"},
							{"data":"total"},
							{"data":"home_score"},
							{"data":"home_team"}
						],
						buttons:[
							{'text':"Submit Games"},
							{'text':"next day"},
							{"extend":"pdfHtml5","orientation":"landscape","title":"print picks"},
						]

					})
				})
			})			
		})
</script>
{% endblock %}